<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>

<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Aroma Shop - Shop</title>
<link rel="icon" href="assets/img/Fevicon.png" type="image/png">
<link rel="stylesheet" href="assets/vendors/bootstrap/bootstrap.min.css">
<link rel="stylesheet" href="assets/vendors/fontawesome/css/all.min.css">
<link rel="stylesheet"
	href="assets/vendors/themify-icons/themify-icons.css">
<link rel="stylesheet" href="assets/vendors/linericon/style.css">
<link rel="stylesheet"
	href="assets/vendors/owl-carousel/owl.theme.default.min.css">
<link rel="stylesheet"
	href="assets/vendors/owl-carousel/owl.carousel.min.css">
<link rel="stylesheet" href="assets/vendors/nice-select/nice-select.css">
<link rel="stylesheet"
	href="assets/vendors/nouislider/nouislider.min.css">

<link rel="stylesheet" href="assets/css/style.css">
<style>
.notification {
    position: fixed;
    top: 80px;
    right: 20px;
    background-color: #4CAF50;
    color: white;
    padding: 15px;
    border-radius: 5px;
    z-index: 1000;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    display: none;
    animation: slideIn 0.5s ease-in-out;
}

@keyframes slideIn {
    from {
        right: -300px;
        opacity: 0;
    }
    to {
        right: 20px;
        opacity: 1;
    }
}

.notification.show {
    display: block;
}

.notification .close-btn {
    margin-left: 15px;
    color: white;
    font-weight: bold;
    float: right;
    font-size: 22px;
    line-height: 20px;
    cursor: pointer;
}
/* custom-styles.css */

/* Notification styling */
.notification {
    position: fixed;
    top: 80px;
    right: 20px;
    background-color: #4CAF50;
    color: white;
    padding: 15px 20px;
    border-radius: 5px;
    z-index: 1000;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    display: none;
    opacity: 0;
    transition: opacity 0.5s ease-in-out, right 0.5s ease-in-out;
    font-size: 16px;
    min-width: 250px;
}

.notification.error {
    background-color: #f44336;
}

.notification.show {
    display: block;
    opacity: 1;
    right: 20px;
}

.notification .close-btn {
    margin-left: 15px;
    color: white;
    font-weight: bold;
    float: right;
    font-size: 22px;
    line-height: 20px;
    cursor: pointer;
    transition: 0.3s;
}

.notification .close-btn:hover {
    color: #f2f2f2;
}

/* Enhance product cards */
.card-product {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.card-product:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
}

.card-product__imgOverlay {
    transition: opacity 0.3s ease;
}

.card-product:hover .card-product__imgOverlay {
    opacity: 1;
}

/* Cart button animation */
.add-to-cart-btn {
    position: relative;
    overflow: hidden;
}

.add-to-cart-btn:after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 5px;
    height: 5px;
    background: rgba(255, 255, 255, 0.5);
    opacity: 0;
    border-radius: 100%;
    transform: scale(1, 1) translate(-50%);
    transform-origin: 50% 50%;
}

.add-to-cart-btn:focus:not(:active)::after {
    animation: ripple 1s ease-out;
}

@keyframes ripple {
    0% {
        transform: scale(0, 0);
        opacity: 0.5;
    }
    20% {
        transform: scale(25, 25);
        opacity: 0.5;
    }
    100% {
        opacity: 0;
        transform: scale(40, 40);
    }
}

.cart-counter {
    position: absolute;
    top: -8px;
    right: -8px;
    background-color: #ff4136;
    color: white;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: bold;
}
</style>
</head>
<body>
	<jsp:include page="/header.jsp" />
	
	<!-- Notification -->
	<c:if test="${not empty sessionScope.cartMessage}">
		<div id="notification" class="notification">
			<span class="close-btn" onclick="closeNotification()">&times;</span>
			${sessionScope.cartMessage}
		</div>
		<c:remove var="cartMessage" scope="session" />
	</c:if>
	
	<!-- ================ start banner area ================= -->
	<section class="blog-banner-area" id="category">
		<div class="container h-100">
			<div class="blog-banner">
				<div class="text-center">
					<h1>Shop Category</h1>
					<nav aria-label="breadcrumb" class="banner-breadcrumb">
						<ol class="breadcrumb">
							<li class="breadcrumb-item"><a href="#">Home</a></li>
							<li class="breadcrumb-item active" aria-current="page">Shop
								Category</li>
						</ol>
					</nav>
				</div>
			</div>
		</div>
	</section>
	<!-- ================ end banner area ================= -->
	<!-- ================ category section start ================= -->
	<section class="section-margin--small mb-5">
		<div class="container">
			<div class="row">
				<div class="col-xl-3 col-lg-4 col-md-5">
					<div class="sidebar-categories">
						<div class="head">Browse Categories</div>
						<ul class="main-categories">
							<li class="common-filter">
								<form action="#">
									<ul>
										<li class="filter-list"><input class="pixel-radio"
											type="radio" id="men" name="brand"><label for="men">Men<span>
													(3600)</span></label></li>
										<li class="filter-list"><input class="pixel-radio"
											type="radio" id="women" name="brand"><label
											for="women">Women<span> (3600)</span></label></li>
										<li class="filter-list"><input class="pixel-radio"
											type="radio" id="accessories" name="brand"><label
											for="accessories">Accessories<span> (3600)</span></label></li>
										<li class="filter-list"><input class="pixel-radio"
											type="radio" id="footwear" name="brand"><label
											for="footwear">Footwear<span> (3600)</span></label></li>
										<li class="filter-list"><input class="pixel-radio"
											type="radio" id="bayItem" name="brand"><label
											for="bayItem">Bay item<span> (3600)</span></label></li>
										<li class="filter-list"><input class="pixel-radio"
											type="radio" id="electronics" name="brand"><label
											for="electronics">Electronics<span> (3600)</span></label></li>
										<li class="filter-list"><input class="pixel-radio"
											type="radio" id="food" name="brand"><label for="food">Food<span>
													(3600)</span></label></li>
									</ul>
								</form>
							</li>
						</ul>
					</div>
					<div class="sidebar-filter">
						<div class="top-filter-head">Product Filters</div>
						<div class="common-filter">
							<div class="head">Brands</div>
							<form action="#">
								<ul>
									<li class="filter-list"><input class="pixel-radio"
										type="radio" id="apple" name="brand"><label
										for="apple">Apple<span>(29)</span></label></li>
									<li class="filter-list"><input class="pixel-radio"
										type="radio" id="asus" name="brand"><label for="asus">Asus<span>(29)</span></label></li>
									<li class="filter-list"><input class="pixel-radio"
										type="radio" id="gionee" name="brand"><label
										for="gionee">Gionee<span>(19)</span></label></li>
									<li class="filter-list"><input class="pixel-radio"
										type="radio" id="micromax" name="brand"><label
										for="micromax">Micromax<span>(19)</span></label></li>
									<li class="filter-list"><input class="pixel-radio"
										type="radio" id="samsung" name="brand"><label
										for="samsung">Samsung<span>(19)</span></label></li>
								</ul>
							</form>
						</div>
						<div class="common-filter">
							<div class="head">Color</div>
							<form action="#">
								<ul>
									<li class="filter-list"><input class="pixel-radio"
										type="radio" id="black" name="color"><label
										for="black">Black<span>(29)</span></label></li>
									<li class="filter-list"><input class="pixel-radio"
										type="radio" id="balckleather" name="color"><label
										for="balckleather">Black Leather<span>(29)</span></label></li>
									<li class="filter-list"><input class="pixel-radio"
										type="radio" id="blackred" name="color"><label
										for="blackred">Black with red<span>(19)</span></label></li>
									<li class="filter-list"><input class="pixel-radio"
										type="radio" id="gold" name="color"><label for="gold">Gold<span>(19)</span></label></li>
									<li class="filter-list"><input class="pixel-radio"
										type="radio" id="spacegrey" name="color"><label
										for="spacegrey">Spacegrey<span>(19)</span></label></li>
								</ul>
							</form>
						</div>
						<div class="common-filter">
							<div class="head">Price</div>
							<div class="price-range-area">
								<div id="price-range"></div>
								<div class="value-wrapper d-flex">
									<div class="price">Price:</div>
									<span>$</span>
									<div id="lower-value"></div>
									<div class="to">to</div>
									<span>$</span>
									<div id="upper-value"></div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-xl-9 col-lg-8 col-md-7">
					<!-- Start Filter Bar -->
					<div class="filter-bar d-flex flex-wrap align-items-center">
						<div class="sorting">
							<select>
								<option value="1">Default sorting</option>
								<option value="1">Default sorting</option>
								<option value="1">Default sorting</option>
							</select>
						</div>
						<div class="sorting mr-auto">
							<select>
								<option value="1">Show 12</option>
								<option value="1">Show 12</option>
								<option value="1">Show 12</option>
							</select>
						</div>
						<div>
							<div class="input-group filter-bar-search">
								<input type="text" placeholder="Search">
								<div class="input-group-append">
									<button type="button">
										<i class="ti-search"></i>
									</button>
								</div>
							</div>
						</div>
					</div>
					<!-- End Filter Bar -->

					<!-- Start Best Seller -->
					<section class="lattest-product-area pb-40 category-list">
						<div class="row">
							<c:forEach var="product" items="${products}">
								<div class="col-md-6 col-lg-4">
									<div class="card text-center card-product">
										<div class="card-product__img">
											<img class="card-img" src="${product.image}"
												alt="${product.name}">
											<ul class="card-product__imgOverlay">
												<li><button onclick="window.location.href='ProductController?action=details&id=${product.productId}'">
														<i class="ti-search"></i>
													</button></li>
												<li>
													<form action="ProductController" method="post" class="cart-form">
														<input type="hidden" name="action" value="addToCart">
														<input type="hidden" name="productId"
															value="${product.productId}">
														<button type="submit" class="add-to-cart-btn">
															<i class="ti-shopping-cart"></i>
														</button>
													</form>
												</li>

												<li><button>
														<i class="ti-heart"></i>
													</button></li>
											</ul>
										</div>
										<div class="card-body">
											<p>${product.categoryId}</p>
											<h4 class="card-product__title">
												<a href="ProductController?action=details&id=${product.productId}">${product.name}</a>
											</h4>
											<p class="card-product__price">$${product.price}</p>
										</div>
									</div>
								</div>
							</c:forEach>
						</div>
					</section>
					<!-- End Best Seller -->
				</div>
			</div>
		</div>
	</section>
	<!-- ================ category section end ================= -->

	<!-- ================ top product area start ================= -->
	<section class="related-product-area">
		<div class="container">
			<div class="section-intro pb-60px">
				<p>Popular Item in the market</p>
				<h2>
					Top <span class="section-intro__style">Product</span>
				</h2>
			</div>
			<div class="row mt-30">
				<div class="col-sm-6 col-xl-3 mb-4 mb-xl-0">
					<div class="single-search-product-wrapper">
						<div class="single-search-product d-flex">
							<a href="#"><img src="img/product/product-sm-1.png" alt=""></a>
							<div class="desc">
								<a href="#" class="title">Gray Coffee Cup</a>
								<div class="price">$170.00</div>
							</div>
						</div>
						<div class="single-search-product d-flex">
							<a href="#"><img src="img/product/product-sm-2.png" alt=""></a>
							<div class="desc">
								<a href="#" class="title">Gray Coffee Cup</a>
								<div class="price">$170.00</div>
							</div>
						</div>
						<div class="single-search-product d-flex">
							<a href="#"><img src="img/product/product-sm-3.png" alt=""></a>
							<div class="desc">
								<a href="#" class="title">Gray Coffee Cup</a>
								<div class="price">$170.00</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	<!-- ================ top product area end ================= -->

	<!-- ================ Subscribe section start ================= -->
	<section class="subscribe-position">
		<div class="container">
			<div class="subscribe text-center">
				<h3 class="subscribe__title">Get Update From Anywhere</h3>
				<p>Bearing Void gathering light light his eavening unto dont
					afraid</p>
				<div id="mc_embed_signup">
					<form target="_blank"
						action="https://spondonit.us12.list-manage.com/subscribe/post?u=1462626880ade1ac87bd9c93a&amp;id=92a4423d01"
						method="get" class="subscribe-form form-inline mt-5 pt-1">
						<div class="form-group ml-sm-auto">
							<input class="form-control mb-1" type="email" name="EMAIL"
								placeholder="Enter your email" onfocus="this.placeholder = ''"
								onblur="this.placeholder = 'Your Email Address '">
							<div class="info"></div>
						</div>
						<button class="button button-subscribe mr-auto mb-1" type="submit">Subscribe
							Now</button>
						<div style="position: absolute; left: -5000px;">
							<input name="b_36c4fd991d266f23781ded980_aefe40901a"
								tabindex="-1" value="" type="text">
						</div>
					</form>
				</div>
			</div>
		</div>
	</section>
	<!-- ================ Subscribe section end ================= -->

	<jsp:include page="/footer.jsp" />

	<script src="assets/vendors/jquery/jquery-3.2.1.min.js"></script>
	<script src="assets/vendors/bootstrap/bootstrap.bundle.min.js"></script>
	<script src="assets/vendors/skrollr.min.js"></script>
	<script src="assets/vendors/owl-carousel/owl.carousel.min.js"></script>
	<script src="assets/vendors/nice-select/jquery.nice-select.min.js"></script>
	<script src="assets/vendors/nouislider/nouislider.min.js"></script>
	<script src="assets/vendors/jquery.ajaxchimp.min.js"></script>
	<script src="assets/vendors/mail-script.js"></script>
	<script src="assets/js/main.js"></script>
	
	<!-- Custom notification script -->
	<script>
		// Display notification
		function showNotification() {
			var notification = document.getElementById("notification");
			if (notification) {
				notification.classList.add("show");
				
				// Auto-hide after 5 seconds
				setTimeout(function() {
					closeNotification();
				}, 5000);
			}
		}
		
		// Close notification
		function closeNotification() {
			var notification = document.getElementById("notification");
			if (notification) {
				notification.classList.remove("show");
				
				// Remove completely after animation
				setTimeout(function() {
					if (notification.parentNode) {
						notification.parentNode.removeChild(notification);
					}
				}, 500);
			}
		}
		
		// Show notification on page load if exists
		document.addEventListener("DOMContentLoaded", function() {
			showNotification();
			
			// Ajax implementation for add to cart
			document.querySelectorAll('.add-to-cart-btn').forEach(button => {
				button.addEventListener('click', function(e) {
					e.preventDefault();
					const form = this.closest('form');
					
					fetch(form.action, {
						method: 'POST',
						body: new FormData(form),
						headers: {
							'X-Requested-With': 'XMLHttpRequest'
						}
					})
					.then(response => {
						if (response.ok) {
							// Create a temporary notification
							const tempNotification = document.createElement('div');
							tempNotification.id = 'temp-notification';
							tempNotification.className = 'notification';
							tempNotification.innerHTML = `
								<span class="close-btn" onclick="closeNotification()">&times;</span>
								Product added to cart successfully!
							`;
							document.body.appendChild(tempNotification);
							
							// Show notification
							setTimeout(() => {
								tempNotification.classList.add('show');
							}, 10);
							
							// Auto-hide after 3 seconds
							setTimeout(() => {
								tempNotification.classList.remove('show');
								setTimeout(() => {
									document.body.removeChild(tempNotification);
								}, 500);
							}, 3000);
						}
					})
					.catch(error => {
						console.error('Error:', error);
					});
				});
			});
		});
	</script>
</body>
</html>